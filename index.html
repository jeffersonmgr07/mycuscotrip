<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MyCuscoTrip - Tours y Paquetes Tur√≠sticos en Cusco y Machu Picchu</title>

  <!-- Fuentes -->
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  
  <!-- Iconos -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  
  <!-- Flatpickr -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/plugins/confirmDate/confirmDate.css"/>

  <!-- Estilos -->
  <link rel="stylesheet" href="assets/css/main.css">
  <link rel="stylesheet" href="assets/css/components.css">
  <link rel="stylesheet" href="assets/css/header.css">
  <link rel="stylesheet" href="assets/css/footer.css">
  <link rel="stylesheet" href="assets/css/search-bar.css">
  <link rel="stylesheet" href="assets/css/products.css">
  <link rel="stylesheet" href="assets/css/responsive.css">
</head>

<body>
  <!-- Header (se cargar√° din√°micamente) -->
  <div id="header-container"></div>

  <!-- WhatsApp flotante (m√≥vil) -->
  <a class="wa-float" href="https://wa.me/51999999999" target="_blank" rel="noopener" aria-label="WhatsApp">
    <img src="assets/img/LogoWhatsapp.png" alt="WhatsApp" />
  </a>

  <!-- Hero -->
  <section class="hero" id="home">
    <div class="hero-media" aria-hidden="true">
      <video autoplay muted loop playsinline preload="metadata" poster="assets/img/hero-poster.jpg">
        <source src="assets/videos/hero.mp4" type="video/mp4" />
        <source src="assets/videos/hero.webm" type="video/webm" />
      </video>
    </div>

    <div class="container">
      <div class="hero-content">
        <div class="hero-text">
          <h2>¬øPlanes para<br><span>Machu Picchu?</span></h2>
          <h2>encuentra el plan perfecto aqu√≠</h2>
        </div>

        <!-- Componente Search Bar -->
        <div id="search-bar-container"></div>
      </div>
    </div>
  </section>

  <!-- MODAL OVERLAY PARA COMPONENTES (M√ìVILES) -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal-content" id="modalContent"></div>
  </div>

  <!-- Secci√≥n de Destinos -->
  <section id="machu-picchu">
    <div class="container">
      <div class="section-header">
        <h2>Machu Picchu</h2>
        <p>Descubre la maravilla del mundo moderno con nuestros tours exclusivos</p>
      </div>
      <div class="destinos-grid" id="products-container">
        <!-- Los productos se cargar√°n aqu√≠ din√°micamente -->
      </div>
    </div>
  </section>

  <!-- Footer (se cargar√° din√°micamente) -->
  <div id="footer-container"></div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/plugins/confirmDate/confirmDate.js"></script>
  
  <!-- Script principal SIMPLIFICADO (sin m√≥dulos) -->
  <script>
    // Cargar componentes din√°micamente - VERSI√ìN SIMPLIFICADA
    async function loadComponent(componentName, targetId) {
      try {
        const response = await fetch(`components/${componentName}.html`);
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        const html = await response.text();
        document.getElementById(targetId).innerHTML = html;
        
        console.log(`‚úÖ Componente ${componentName} cargado`);
        
        // Inicializar scripts espec√≠ficos del componente
        if (componentName === 'header' && window.MyCuscoTripHeader) {
          console.log('‚úÖ Header JS inicializado');
        }
        
      } catch (error) {
        console.error(`‚ùå Error cargando ${componentName}:`, error);
        // Mostrar fallback
        document.getElementById(targetId).innerHTML = 
          `<div style="color: red; padding: 20px; text-align: center;">
             Error cargando ${componentName}: ${error.message}
           </div>`;
      }
    }

    // Cargar todos los componentes al iniciar
    document.addEventListener('DOMContentLoaded', async () => {
      console.log('üöÄ DOM cargado, iniciando carga de componentes...');
      
      // Cargar componentes en paralelo
      await Promise.all([
        loadComponent('header', 'header-container'),
        loadComponent('search-bar', 'search-bar-container'),
        loadComponent('footer', 'footer-container')
      ]);
      
      console.log('‚úÖ Todos los componentes cargados');
      
      // Inicializar scripts de componentes (asegurarse que est√©n cargados)
      setTimeout(() => {
        if (typeof MyCuscoTripHeader !== 'undefined') {
          new MyCuscoTripHeader();
        }
        if (typeof MyCuscoTripSearchBar !== 'undefined') {
          new MyCuscoTripSearchBar();
        }
        if (typeof MyCuscoTripProducts !== 'undefined') {
          new MyCuscoTripProducts();
        }
      }, 100);
    });
  </script>
  
 <!-- Scripts EXTERNOS primero -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/plugins/confirmDate/confirmDate.js"></script>
  
  <!-- Scripts PROPIOS despu√©s -->
  <script src="assets/js/components/header.js"></script>
  <script src="assets/js/components/search-bar.js"></script>
  <script src="assets/js/components/products.js"></script>
  
  <!-- Script principal √öLTIMO -->
  <script src="assets/js/main.js"></script>
</body>
</html>
